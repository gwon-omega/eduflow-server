name: Keep Render Alive

on:
  schedule:
    # Run every 30 minutes during business hours (Nepal Time = UTC+5:45)
    # 3:15-15:15 UTC = 9:00 AM - 9:00 PM NPT
    # Monday to Saturday only
    - cron: '15,45 3-15 * * 1-6'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Server
        run: |
          echo "Pinging server at $(date -u)"
          response=$(curl -s -o /dev/null -w "%{http_code}" ${{ secrets.RENDER_HEALTH_URL }} --max-time 30 || echo "timeout")
          echo "Response: $response"
          # Don't fail the job if server is down - just log it
          if [ "$response" != "200" ]; then
            echo "Warning: Server responded with $response"
          fi
        env:
          RENDER_HEALTH_URL: ${{ secrets.RENDER_HEALTH_URL }}
